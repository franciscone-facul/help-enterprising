<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="../css/style.css"> 
  <link rel="stylesheet" href="css/navbar.css">
  <title>Ajuda | Help Enterprising</title>
</head>
<body>
  <nav>
    <div class="nav-bar">
      <a href="home.html">Home</a>
      <a href="cadastro-dados.html">Dados</a>
      <a href="cadastro-empresa.html">Cadastro de Empresas</a>
      <a href="publicar-post.html">Publicar</a>
      <a href="vendas.html">Vendas</a>
      <a href="ajuda.html">Ajuda</a>
      <a href="#" onclick="logoff()" class="sair">Sair</a>
    </div>
  </nav>
  <h1>Est√° com algum problema? Entre em contato com a gente!</h1>
  <div class="help-desk">
    <div class="post">
      <form id="formularioCadastroAjuda" method="post" onsubmit="return cadastrarAjuda()">
        Titulo:
        <br>
        <input type="text" name="tituloFaleConosco">
        <br>
        Duvida:
        <br>
        <textarea id="" rows="3" cols="50" maxlength="100" class="textarea-padrao" name="duvidaFaleConosco"></textarea>
        <br>
        <button id="btn_publicar" class="btn-green">Enviar</button>
      </form>
      <!-- <div class="extra">
                <div id="div_erro" class="msg_erro">
                </div>
                <img src="aguarde-orange.gif" id="img_aguarde"> 
            </div> -->
    </div>
  </div>
</body>
</html>

<script>
  function cadastrarAjuda() {
    // aguardar();
    console.log("Entrei na function help-desk!")
    var formularioAjuda = new URLSearchParams(new FormData(formularioCadastroAjuda));
    var idUsuario = sessionStorage.id_usuario_meuapp;
    fetch(`/usuarios/ajuda/${idUsuario}`, {
      method: "POST",
      body: formularioAjuda
    }).then(function (response) {

      if (response.ok) {

        console.log("DEU CERTO!");

      } else {

        console.log('Erro de cadastro da ajuda!');
        response.text().then(function (resposta) {
          div_erro.innerHTML = resposta;
        });
        // finalizar_aguardar();
      }
    });

    return false;
  }
</script>